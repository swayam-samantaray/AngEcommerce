<div class="container mt-4">
  <h2 class="mb-4">Featured Products ({{ filteredProducts.length }})</h2>

  <!-- Search Input -->
  <div class="row mb-3">
  <div class="col-md-4">
    <input
      type="text"
      class="form-control"
      placeholder="Search products..."
      [(ngModel)]="searchText"
      (input)="applyFilter()" />
  </div>

  <div class="col-md-4">
    <select
      class="form-select"
      [(ngModel)]="selectedCategory"
      (change)="applyFilter()">
      <option value="All">All Categories</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>
  </div>

  <div class="col-md-4">
    <input
      type="number"
      class="form-control"
      [(ngModel)]="maxPrice"
      (input)="applyFilter()"
      [min]="0"
      placeholder="Max Price" />
  </div>
</div>

  <!-- Product Grid -->
  <div class="row">
    <div class="col-lg-3 col-md-4 col-sm-6 mb-4" *ngFor="let product of paginatedProducts">
      <div class="card h-100 shadow-sm prd_box">
        <img
          [src]="product.imageUrl"
          class="card-img-top"
          [alt]="product.name"
          style="height: 200px; object-fit: contain;"
          (error)="product.imageUrl = 'assets/images/default.png'" />

        <div class="card-body d-flex flex-column">
          <h5 class="card-title"><a [routerLink]="['/product', product.id]">{{ product.name }}</a></h5>
          <p class="card-text text-muted">{{ product.description }}</p>
          <div class="mt-auto d-flex justify-content-between align-items-center">
            <strong class="text-primary">{{ product.price | currency:'INR':'symbol' }}</strong>
            <button class="btn btn-sm btn-primary" (click)="addToCart(product)">
              Add to Cart
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages() > 1">
    <ul class="pagination justify-content-center">
      <li
        class="page-item"
        [class.disabled]="currentPage === 1"
        (click)="goToPage(currentPage - 1)">
        <a class="page-link" href="javascript:void(0)">Previous</a>
      </li>

      <li
        class="page-item"
        *ngFor="let page of [].constructor(totalPages()); let i = index"
        [class.active]="currentPage === i + 1"
        (click)="goToPage(i + 1)">
        <a class="page-link" href="javascript:void(0)">{{ i + 1 }}</a>
      </li>

      <li
        class="page-item"
        [class.disabled]="currentPage === totalPages()"
        (click)="goToPage(currentPage + 1)">
        <a class="page-link" href="javascript:void(0)">Next</a>
      </li>
    </ul>
  </nav>
</div>
